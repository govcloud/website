{{ "<!--[if gte IE 9 | !IE ]><!-->" | safeHTML }}
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.0/jquery.min.js"></script>
    <script src="https://wet-boew.github.io/wet-boew/js/wet-boew.min.js"></script>
{{ "<!--<![endif]-->" | safeHTML }}
{{ "<!--[if lt IE 9]>" | safeHTML }}
    <script src="https://wet-boew.github.io/wet-boew/js/ie8-wet-boew2.min.js"></script>
{{ "<![endif]-->" | safeHTML }}
<script src="//yandex.st/highlightjs/8.0/highlight.min.js"></script>
<script>hljs.initHighlightingOnLoad();</script>
<script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    ga('create', '{{ .Site.Params.GoogleAnalyticsUserID }}', 'auto');
    ga('send', 'pageview');
</script>
<script src="{{ .Site.BaseURL }}/js/collapse.js"></script>
<script src="{{ .Site.BaseURL }}/js/d3.v4.min.js"></script>
<script src="{{ .Site.BaseURL }}/js/d3.dependencyWheel.js"></script>
<script src="{{ .Site.BaseURL }}/js/composerBuilder.js"></script>
<script>
  $('.docmenu li').each(function() {
    if ($(this).hasClass('current_page')) {
      $(this).closest('.menu').collapse();
    }
  });
  $(function() { $('table').addClass('wb-tables table table-striped table-hover').attr('data-wb-tables', '{ "bFilter" : 1, "bInfo" : 0, "bPaginate" : false }'); })
  var gitHubApiUrl = 'https://api.github.com/repos/';
  var getData = function(target, callback) {
    var responses = {
      composerjson: null,
      composerlock: null
    };
    var checkFinished = function() {
      if (responses.composerjson && responses.composerlock) {
        callback(responses.composerjson, responses.composerlock);
      }
    }
    d3.xhr(gitHubApiUrl + target + '/contents/composer.json', 'application/vnd.github.VERSION.raw', function(err, composerjson) {
      responses.composerjson = JSON.parse(composerjson.responseText);
      checkFinished();
    });
    d3.xhr(gitHubApiUrl + target + '/contents/composer.lock', 'application/vnd.github.VERSION.raw', function(err, composerlock) {
      responses.composerlock = JSON.parse(composerlock.responseText);
      checkFinished();
    });
  };
  var chart = d3.chart.dependencyWheel();
  d3.json("{{ .Site.BaseURL }}/data/composer.json", function(composerjson) {
    d3.json("{{ .Site.BaseURL }}/data/composer.lock", function(composerlock) {
      var data = buildMatrixFromComposerJsonAndLock(composerjson, composerlock);
      d3.select('#chart_placeholder')
        .datum(data)
        .call(chart);
    });
  });
  document.getElementById('composerRedraw').addEventListener('submit', function(e) {
    e.preventDefault();
    var composerjson = JSON.parse(document.getElementById('composerJson').value);
    var composerlock = JSON.parse(document.getElementById('composerLock').value);
    var data = buildMatrixFromComposerJsonAndLock(composerjson, composerlock);
    d3.select('#chart_placeholder svg').remove();
    d3.select('#chart_placeholder')
      .datum(data)
      .call(chart);
  }, false);

</script>
